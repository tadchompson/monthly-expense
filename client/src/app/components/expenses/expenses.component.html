<h2>Expenses</h2>

<div class="filters">
  <select [ngModel]="selectedMonth()" (ngModelChange)="selectedMonth.set($event); onFilterChange()">
    @for (m of months; track m.value) {
      <option [ngValue]="m.value">{{ m.label }}</option>
    }
  </select>

  <select [ngModel]="selectedYear()" (ngModelChange)="selectedYear.set($event); onFilterChange()">
    @for (y of years; track y) {
      <option [ngValue]="y">{{ y }}</option>
    }
  </select>

  <button class="btn-delete-all" (click)="deleteAll()">Delete All</button>
</div>

@if (expenses().length === 0) {
  <p class="empty">No expenses found for this period.</p>
} @else {
  <table>
    <thead>
      <tr>
        <th>Date</th>
        <th>Description</th>
        <th>Category</th>
        <th>Merchant</th>
        <th>Amount</th>
        <th></th>
      </tr>
    </thead>
    <tbody>
      @for (exp of expenses(); track exp._id) {
        <tr>
          <td>{{ exp.date | date:'shortDate' }}</td>
          <td>{{ exp.description }}</td>
          <td>{{ exp.category }}</td>
          <td>{{ exp.merchant }}</td>
          <td class="amount">{{ exp.amount | currency }}</td>
          <td>
            <button class="btn-delete" (click)="deleteExpense(exp._id)">Delete</button>
          </td>
        </tr>
      }
    </tbody>
  </table>
}
